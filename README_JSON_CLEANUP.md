# ğŸ§¹ JSONæ–‡ä»¶æ¸…ç†è„šæœ¬ä½¿ç”¨è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

è¿™äº›è„šæœ¬ç”¨äºæ‰‹åŠ¨åˆ é™¤ç½‘æ ¼äº¤æ˜“ç­–ç•¥äº§ç”Ÿçš„JSONçŠ¶æ€æ–‡ä»¶ï¼ŒåŒ…æ‹¬ï¼š
- `grid_state.json` - ç½‘æ ¼çŠ¶æ€æ–‡ä»¶
- `orders_state.json` - è®¢å•çŠ¶æ€æ–‡ä»¶  
- `dynamic_grid_params.json` - åŠ¨æ€å‚æ•°æ–‡ä»¶
- `performance_*.json` - æ€§èƒ½æ•°æ®æ–‡ä»¶
- `trading_history_*.json` - äº¤æ˜“å†å²æ–‡ä»¶
- `risk_events_*.json` - é£é™©äº‹ä»¶æ–‡ä»¶

## ğŸ› ï¸ å¯ç”¨è„šæœ¬

### 1. Shellè„šæœ¬ (æ¨è)
```bash
./cleanup_json_files.sh
```

### 2. Pythonè„šæœ¬
```bash
python3 cleanup_json_files.py
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### äº¤äº’å¼æ¨¡å¼ (é»˜è®¤)
```bash
# è¿è¡Œè„šæœ¬ï¼Œè¿›å…¥äº¤äº’å¼èœå•
./cleanup_json_files.sh
```

**äº¤äº’å¼èœå•é€‰é¡¹ï¼š**
1. **åˆ é™¤æŒ‡å®šæ–‡ä»¶** - è¾“å…¥æ–‡ä»¶ç¼–å·é€‰æ‹©æ€§åˆ é™¤
2. **åˆ é™¤æ‰€æœ‰æ–‡ä»¶** - ä¸€é”®åˆ é™¤æ‰€æœ‰JSONæ–‡ä»¶
3. **é‡æ–°æ‰«ææ–‡ä»¶** - åˆ·æ–°æ–‡ä»¶åˆ—è¡¨
4. **é€€å‡º** - é€€å‡ºç¨‹åº

### å‘½ä»¤è¡Œæ¨¡å¼

#### æŸ¥çœ‹å¸®åŠ©
```bash
./cleanup_json_files.sh --help
```

#### ä»…åˆ—å‡ºæ–‡ä»¶ï¼ˆä¸åˆ é™¤ï¼‰
```bash
./cleanup_json_files.sh --list
```

#### è‡ªåŠ¨åˆ é™¤æ‰€æœ‰JSONæ–‡ä»¶
```bash
./cleanup_json_files.sh --auto
```

#### åˆ é™¤æŒ‡å®šæ¨¡å¼çš„æ–‡ä»¶
```bash
# åˆ é™¤ç½‘æ ¼çŠ¶æ€æ–‡ä»¶
./cleanup_json_files.sh --pattern "grid_*.json"

# åˆ é™¤æ€§èƒ½æ•°æ®æ–‡ä»¶
./cleanup_json_files.sh --pattern "performance_*.json"
```

#### ä¸åˆ›å»ºå¤‡ä»½ç›´æ¥åˆ é™¤
```bash
./cleanup_json_files.sh --auto --no-backup
```

## ğŸ“Š åŠŸèƒ½ç‰¹æ€§

### âœ… å®‰å…¨ç‰¹æ€§
- **è‡ªåŠ¨å¤‡ä»½**: åˆ é™¤å‰è‡ªåŠ¨åˆ›å»ºå¤‡ä»½åˆ° `backup_deleted_files/` ç›®å½•
- **ç¡®è®¤æç¤º**: äº¤äº’å¼ç¡®è®¤é¿å…è¯¯åˆ 
- **æ–‡ä»¶éªŒè¯**: æ£€æŸ¥æ–‡ä»¶å­˜åœ¨æ€§å’Œæƒé™
- **é”™è¯¯å¤„ç†**: è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œæ¢å¤å»ºè®®

### ğŸ“‹ æ–‡ä»¶ä¿¡æ¯æ˜¾ç¤º
- **æ–‡ä»¶å¤§å°**: æ˜¾ç¤ºäººç±»å¯è¯»çš„æ–‡ä»¶å¤§å°
- **ä¿®æ”¹æ—¶é—´**: æ˜¾ç¤ºæœ€åä¿®æ”¹æ—¶é—´
- **å†…å®¹é¢„è§ˆ**: æ˜¾ç¤ºJSONæ–‡ä»¶çš„å…³é”®ä¿¡æ¯
  - ç½‘æ ¼çŠ¶æ€ï¼šèµ„é‡‘å’Œåˆ©æ¶¦ä¿¡æ¯
  - è®¢å•çŠ¶æ€ï¼šæ´»è·ƒè®¢å•æ•°é‡
  - æ€§èƒ½æ•°æ®ï¼šäº¤æ˜“æ¬¡æ•°ç­‰

### ğŸ¯ çµæ´»é€‰æ‹©
- **å•ä¸ªåˆ é™¤**: é€‰æ‹©ç‰¹å®šæ–‡ä»¶åˆ é™¤
- **æ‰¹é‡åˆ é™¤**: æ”¯æŒèŒƒå›´é€‰æ‹© (å¦‚: 1,3,5 æˆ– 1-3)
- **æ¨¡å¼åŒ¹é…**: ä½¿ç”¨é€šé…ç¬¦åŒ¹é…æ–‡ä»¶
- **å…¨éƒ¨åˆ é™¤**: ä¸€é”®æ¸…ç†æ‰€æœ‰JSONæ–‡ä»¶

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šäº¤äº’å¼åˆ é™¤
```bash
$ ./cleanup_json_files.sh

ğŸ§¹ JSONæ–‡ä»¶æ¸…ç†å·¥å…·
========================
â„¹ï¸  æ­£åœ¨æ‰«æJSONæ–‡ä»¶...

ğŸ“ æ‰¾åˆ°ä»¥ä¸‹ 3 ä¸ªJSONæ–‡ä»¶:
==============================================
1. grid_state.json
    ğŸ“ è·¯å¾„: ./grid_state.json
    ğŸ“ å¤§å°: 2.1K
    ğŸ•’ ä¿®æ”¹æ—¶é—´: 2024-01-15 14:30:25
    ğŸ“‹ å†…å®¹: ç½‘æ ¼çŠ¶æ€ - èµ„é‡‘: 1000.0, åˆ©æ¶¦: 25.5

2. orders_state.json
    ğŸ“ è·¯å¾„: ./orders_state.json
    ğŸ“ å¤§å°: 1.5K
    ğŸ•’ ä¿®æ”¹æ—¶é—´: 2024-01-15 14:29:18
    ğŸ“‹ å†…å®¹: è®¢å•çŠ¶æ€ - æ´»è·ƒ: 8, ä¹°å•: 5, å–å•: 3

3. dynamic_grid_params.json
    ğŸ“ è·¯å¾„: ./dynamic_grid_params.json
    ğŸ“ å¤§å°: 856B
    ğŸ•’ ä¿®æ”¹æ—¶é—´: 2024-01-15 14:25:10
    ğŸ“‹ å†…å®¹: JSONæ–‡ä»¶

ğŸ“‹ æ“ä½œé€‰é¡¹:
1. åˆ é™¤æŒ‡å®šæ–‡ä»¶ (è¾“å…¥æ–‡ä»¶ç¼–å·ï¼Œç”¨é€—å·åˆ†éš”)
2. åˆ é™¤æ‰€æœ‰æ–‡ä»¶
3. é‡æ–°æ‰«ææ–‡ä»¶
4. é€€å‡º

è¯·é€‰æ‹©æ“ä½œ (1-4): 1

è¯·è¾“å…¥è¦åˆ é™¤çš„æ–‡ä»¶ç¼–å· (ä¾‹å¦‚: 1,3,5 æˆ– 1-3): 1,2

âš ï¸  å‡†å¤‡åˆ é™¤ä»¥ä¸‹ 2 ä¸ªæ–‡ä»¶:
   - grid_state.json
   - orders_state.json

â“ ç¡®è®¤åˆ é™¤è¿™äº›æ–‡ä»¶å—? (y/N): y

â„¹ï¸  åˆ›å»ºå¤‡ä»½åˆ°: backup_deleted_files
âœ… å¤‡ä»½: grid_state.json â†’ 20240115_143045_grid_state.json
âœ… å¤‡ä»½: orders_state.json â†’ 20240115_143045_orders_state.json

â„¹ï¸  å¼€å§‹åˆ é™¤æ–‡ä»¶...
âœ… å·²åˆ é™¤: grid_state.json
âœ… å·²åˆ é™¤: orders_state.json

ğŸ“Š åˆ é™¤ç»“æœ:
âœ… æˆåŠŸåˆ é™¤: 2 ä¸ªæ–‡ä»¶
```

### ç¤ºä¾‹2ï¼šè‡ªåŠ¨åˆ é™¤æ‰€æœ‰æ–‡ä»¶
```bash
$ ./cleanup_json_files.sh --auto

â„¹ï¸  æ‰¾åˆ° 3 ä¸ªJSONæ–‡ä»¶
âš ï¸  å‡†å¤‡åˆ é™¤ä»¥ä¸‹ 3 ä¸ªæ–‡ä»¶:
   - grid_state.json
   - orders_state.json
   - dynamic_grid_params.json

â„¹ï¸  åˆ›å»ºå¤‡ä»½åˆ°: backup_deleted_files
âœ… å¤‡ä»½: grid_state.json â†’ 20240115_143125_grid_state.json
âœ… å¤‡ä»½: orders_state.json â†’ 20240115_143125_orders_state.json
âœ… å¤‡ä»½: dynamic_grid_params.json â†’ 20240115_143125_dynamic_grid_params.json

â„¹ï¸  å¼€å§‹åˆ é™¤æ–‡ä»¶...
âœ… å·²åˆ é™¤: grid_state.json
âœ… å·²åˆ é™¤: orders_state.json
âœ… å·²åˆ é™¤: dynamic_grid_params.json

ğŸ“Š åˆ é™¤ç»“æœ:
âœ… æˆåŠŸåˆ é™¤: 3 ä¸ªæ–‡ä»¶
```

### ç¤ºä¾‹3ï¼šä»…åˆ—å‡ºæ–‡ä»¶
```bash
$ ./cleanup_json_files.sh --list

ğŸ“ æ‰¾åˆ°ä»¥ä¸‹ 2 ä¸ªJSONæ–‡ä»¶:
==============================================
1. performance_20240115.json
    ğŸ“ è·¯å¾„: ./performance_20240115.json
    ğŸ“ å¤§å°: 3.2K
    ğŸ•’ ä¿®æ”¹æ—¶é—´: 2024-01-15 15:00:12
    ğŸ“‹ å†…å®¹: æ€§èƒ½æ•°æ® - äº¤æ˜“æ¬¡æ•°: 45

2. trading_history_20240115.json
    ğŸ“ è·¯å¾„: ./trading_history_20240115.json
    ğŸ“ å¤§å°: 12.5K
    ğŸ•’ ä¿®æ”¹æ—¶é—´: 2024-01-15 15:00:15
    ğŸ“‹ å†…å®¹: äº¤æ˜“å†å² - 45 æ¡è®°å½•
```

## ğŸ”§ é«˜çº§ç”¨æ³•

### åˆ é™¤ç‰¹å®šç±»å‹çš„æ–‡ä»¶
```bash
# åªåˆ é™¤çŠ¶æ€æ–‡ä»¶
./cleanup_json_files.sh --pattern "*_state.json"

# åªåˆ é™¤å†å²æ–‡ä»¶
./cleanup_json_files.sh --pattern "*_history_*.json"

# åªåˆ é™¤ä»Šå¤©çš„æ–‡ä»¶
./cleanup_json_files.sh --pattern "*$(date +%Y%m%d)*.json"
```

### æ‰¹é‡æ“ä½œ
```bash
# åˆ é™¤æ‰€æœ‰æ–‡ä»¶ä½†ä¸å¤‡ä»½ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
./cleanup_json_files.sh --auto --no-backup

# ç»„åˆä½¿ç”¨ï¼šå…ˆåˆ—å‡ºï¼Œå†åˆ é™¤
./cleanup_json_files.sh --list
./cleanup_json_files.sh --pattern "grid_*.json" --auto
```

## ğŸ“ å¤‡ä»½ç®¡ç†

### å¤‡ä»½ä½ç½®
- å¤‡ä»½ç›®å½•ï¼š`backup_deleted_files/`
- å¤‡ä»½æ ¼å¼ï¼š`YYYYMMDD_HHMMSS_åŸæ–‡ä»¶å.json`

### æ¢å¤æ–‡ä»¶
```bash
# æŸ¥çœ‹å¤‡ä»½æ–‡ä»¶
ls -la backup_deleted_files/

# æ¢å¤ç‰¹å®šæ–‡ä»¶
cp backup_deleted_files/20240115_143045_grid_state.json grid_state.json
```

### æ¸…ç†æ—§å¤‡ä»½
```bash
# åˆ é™¤7å¤©å‰çš„å¤‡ä»½
find backup_deleted_files/ -name "*.json" -mtime +7 -delete

# åˆ é™¤æ‰€æœ‰å¤‡ä»½
rm -rf backup_deleted_files/
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®å®‰å…¨**: åˆ é™¤å‰ä¼šè‡ªåŠ¨åˆ›å»ºå¤‡ä»½ï¼Œä½†è¯·ç¡®ä¿é‡è¦æ•°æ®å·²å¦å¤–ä¿å­˜
2. **æƒé™è¦æ±‚**: éœ€è¦å¯¹æ–‡ä»¶å’Œç›®å½•æœ‰è¯»å†™æƒé™
3. **ä¾èµ–å·¥å…·**: Shellè„šæœ¬å¯é€‰ä¾èµ– `jq` æ¥æ˜¾ç¤ºJSONå†…å®¹è¯¦æƒ…
4. **æ¢å¤èƒ½åŠ›**: å¤‡ä»½æ–‡ä»¶å¯ç”¨äºæ¢å¤ï¼Œä½†å»ºè®®å®šæœŸæ¸…ç†æ—§å¤‡ä»½

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: è„šæœ¬æ²¡æœ‰æ‰§è¡Œæƒé™**
```bash
chmod +x cleanup_json_files.sh
```

**Q: æ‰¾ä¸åˆ°JSONæ–‡ä»¶**
- ç¡®è®¤å½“å‰ç›®å½•æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š`ls *.json`

**Q: åˆ é™¤å¤±è´¥**
- æ£€æŸ¥æ–‡ä»¶æƒé™ï¼š`ls -la *.json`
- ç¡®è®¤æ–‡ä»¶æœªè¢«å…¶ä»–ç¨‹åºå ç”¨

**Q: å¤‡ä»½ç›®å½•åˆ›å»ºå¤±è´¥**
- æ£€æŸ¥å½“å‰ç›®å½•å†™æƒé™
- æ‰‹åŠ¨åˆ›å»ºï¼š`mkdir backup_deleted_files`

### è·å–å¸®åŠ©
```bash
# æŸ¥çœ‹è„šæœ¬å¸®åŠ©
./cleanup_json_files.sh --help

# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
./cleanup_json_files.sh --list
```

---

## ğŸ¯ æ€»ç»“

è¿™äº›æ¸…ç†è„šæœ¬æä¾›äº†å®‰å…¨ã€çµæ´»çš„JSONæ–‡ä»¶ç®¡ç†æ–¹æ¡ˆï¼š

- âœ… **å®‰å…¨å¯é **: è‡ªåŠ¨å¤‡ä»½ + ç¡®è®¤æç¤º
- âœ… **åŠŸèƒ½ä¸°å¯Œ**: äº¤äº’å¼ + å‘½ä»¤è¡Œæ¨¡å¼
- âœ… **ä¿¡æ¯è¯¦ç»†**: æ–‡ä»¶å¤§å°ã€æ—¶é—´ã€å†…å®¹é¢„è§ˆ
- âœ… **æ“ä½œçµæ´»**: å•é€‰ã€å¤šé€‰ã€æ¨¡å¼åŒ¹é…
- âœ… **æ˜“äºä½¿ç”¨**: ç›´è§‚çš„ç•Œé¢å’Œæ¸…æ™°çš„æç¤º

**æ¨èä½¿ç”¨Shellè„šæœ¬ç‰ˆæœ¬**ï¼Œå®ƒæä¾›äº†æœ€ä½³çš„ç”¨æˆ·ä½“éªŒå’ŒåŠŸèƒ½å®Œæ•´æ€§ã€‚ 